---
comments: true
---

NOTICE: 以下内容回答者均为@daoge，不代表其他人意见

时间: 2024/4/4

## 这个服务端基于Nukkit开发吗？

不。不同于PowerNukkitX，这个项目是完全重新编写的，它不基于Nukkit开发。

## 这个服务端有什么优势？

README已经提到一些优势了，不过我认为最重要的优势是代码质量和性能。

Allay在写内容的时候也同时在写单元测试，实践表明单元测试确实非常有用，它不止好几次避免了很多隐藏bug的诞生。

我们在设计架构时还使用了很多很有意思的设计模式，最引人注目的应该就是这个组件系统了，这需要单独一页才能介绍明白。

## 为什么要启动这个项目？

原因很复杂，不过最主要的原因是2023年中我个人认为PNX已经到达了没法维护的阶段。

由于PNX要保持向后兼容，其自身又已有一大堆特性，这就导致每次版本更新我们都需要花费很多时间去调试，甚至每次更新完都或多或少出现一些无法立即修复的漏洞。
（不过很欣慰的是现在PNX已经放弃向后兼容了，使得PNX2的可维护性大大提高。）

PNX在一些大型服务器的实际运行中也暴露出了很多性能问题，很大一部分问题都涉及到底层，不是简简单单就能优化掉的。

例如我们发现PNX在10000+区块的情况下内存占用很大，dump下来内存后发现60%的占用是因为重复的BlockState对象，
通过追踪对象创建，我们发现这是因为区块不会复用相同的方块状态，每次使用到时都会new一个新的。相同的问题也出现在Block对象中。

于是在Allay中，我们对BlockState应用享元模式，对Block应用单例模式，使得allay在高负荷情况下的内存占用和gc频率大幅度降低。

## 第三方服务端（Allay, PNX）好还是BDS好？

抛开用例来对比是没有意义的

例如我如果要开生存服务器，我肯定首选BDS + LL。
但是如果我要开小游戏服，我就会考虑PNX或者其他第三方端了了。

我不是很喜欢这种比较，事实上我不喜欢这种互相对比甚至互相竞争的局面。如果你足够细心，你可以发现Allay的数据导出是依赖于LL的，
甚至我们的组织里面也有LL的dev。LL是一个优秀的项目，PNX也是一个很好的项目，hhh。

## Allay会一直写下去吗？

这个问题很难回答

MCBE的项目都是兴趣驱动的。也许在未来的某一天，我会丢失对MCBE的兴趣。

## 关于PowerNukkitX的未来？

我们不会立即停更PowerNukkitX。

尽管Allay在架构上优于PNX，PNX依然是目前第三方服务端中特性最多的项目。我们在之前的时间里为PNX添加了大量特性，
且PNX在重构后可维护性已大大提高，甚至部分allay独有的优化（包括享元BlockState）已被移植到PNX。

不过我们不能做出保证，PNX目前只有Cool_Loong在积极维护，我不能保证我们能一直维护下去。
若没有新的活跃贡献者的参与，也许在未来的某一天我们必须停更PNX。

但是不管怎样，我认为PNX已经在MCBE的历史上留下了浓墨重彩的一笔，
PNX最大的意义是将整个中文Nukkit圈的技术水平拉高了不止一个档次，并带来了大量新鲜血液，
其也间接催生了Nukkit-MOT等优秀分支的诞生。
我不能说PNX写得有多好，但是如果PNX没有诞生，现在应该就是Nukkit-PM1E单方面垄断社区了，更不会有[这个PR](https://github.com/CloudburstMC/Nukkit/pull/2175)